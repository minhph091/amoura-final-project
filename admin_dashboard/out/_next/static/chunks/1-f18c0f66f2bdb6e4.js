(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1],{7564:(e,t,r)=>{"use strict";r.d(t,{b:()=>l});var s=r(95155);r(12115);var a=r(51976);function l(e){let{size:t="default"}=e;return(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(a.A,{className:"".concat({small:"h-8 w-8",default:"h-12 w-12",medium:"h-14 w-14",large:"h-16 w-16"}[t]," text-rose-500 fill-rose-500")}),(0,s.jsx)("div",{className:"absolute -top-1 -right-1 ".concat("small"===t?"w-3 h-3":"medium"===t?"w-4 h-4":"large"===t?"w-5 h-5":"w-4 h-4"," bg-gradient-to-r from-pink-400 to-rose-400 rounded-full")})]}),(0,s.jsx)("div",{className:"font-bold text-gradient bg-gradient-to-r from-rose-500 to-pink-500 bg-clip-text text-transparent",children:(0,s.jsx)("span",{className:"".concat("small"===t?"text-xl":"medium"===t?"text-3xl":"large"===t?"text-4xl":"text-2xl"),children:"Amoura"})})]})}},15616:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var s=r(95155);r(12115);var a=r(71568),l=r(77657),n=r(67133),o=r(20415);let i=[{code:"en",name:"English",flag:"US"},{code:"vi",name:"Tiếng Việt",flag:"VN"}];function c(){let{language:e,setLanguage:t}=(0,o.o)(),r=i.find(t=>t.code===e);return(0,s.jsxs)(n.rI,{children:[(0,s.jsx)(n.ty,{asChild:!0,children:(0,s.jsxs)(l.$,{variant:"outline",size:"sm",className:"h-8 gap-2 px-3",children:[(0,s.jsx)(a.A,{countryCode:(null==r?void 0:r.flag)||"US",svg:!0,style:{width:"1.2em",height:"1.2em"}}),(0,s.jsx)("span",{className:"hidden sm:inline-flex",children:null==r?void 0:r.name})]})}),(0,s.jsx)(n.SQ,{align:"end",className:"w-[180px]",children:i.map(r=>(0,s.jsxs)(n._2,{onClick:()=>t(r.code),className:"gap-2 cursor-pointer",children:[(0,s.jsx)(a.A,{countryCode:r.flag,svg:!0,style:{width:"1.5em",height:"1.5em"}}),(0,s.jsx)("span",{children:r.name}),e===r.code&&(0,s.jsx)("span",{className:"ml-auto text-sm text-muted-foreground",children:"✓"})]},r.code))})]})}},41001:(e,t,r)=>{Promise.resolve().then(r.bind(r,83625))},69663:(e,t,r)=>{"use strict";r.d(t,{BK:()=>i,eu:()=>o,q5:()=>c});var s=r(95155),a=r(12115),l=r(85977),n=r(53999);let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(l.bL,{ref:t,className:(0,n.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...a})});o.displayName=l.bL.displayName;let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(l._V,{ref:t,className:(0,n.cn)("aspect-square h-full w-full",r),...a})});i.displayName=l._V.displayName;let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(l.H4,{ref:t,className:(0,n.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...a})});c.displayName=l.H4.displayName},83625:(e,t,r)=>{"use strict";r.d(t,{default:()=>W});var s=r(95155),a=r(12115),l=r(35695),n=r(53999),o=r(77657),i=r(47655);let c=a.forwardRef((e,t)=>{let{className:r,children:a,...l}=e;return(0,s.jsxs)(i.bL,{ref:t,className:(0,n.cn)("relative overflow-hidden",r),...l,children:[(0,s.jsx)(i.LM,{className:"h-full w-full rounded-[inherit]",children:a}),(0,s.jsx)(d,{}),(0,s.jsx)(i.OK,{})]})});c.displayName=i.bL.displayName;let d=a.forwardRef((e,t)=>{let{className:r,orientation:a="vertical",...l}=e;return(0,s.jsx)(i.VM,{ref:t,orientation:a,className:(0,n.cn)("flex touch-none select-none transition-colors","vertical"===a&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r),...l,children:(0,s.jsx)(i.lr,{className:"relative flex-1 rounded-full bg-border"})})});d.displayName=i.VM.displayName;var u=r(73783),h=r(17580),m=r(95778),f=r(97210),x=r(51976),g=r(17951),p=r(54416),b=r(74783),v=r(34835),w=r(69663),j=r(67133),N=r(47924),y=r(93509),k=r(62098),S=r(71007),A=r(381),E=r(51362),I=r(89852),R=r(7564),_=r(15616),T=r(20415),C=r(65988),O=r(39910);class D{async getProfile(e){try{return await C.u.get(O.Sn.PROFILE.BY_ID(e))}catch(e){return{success:!1,error:e instanceof Error?e.message:"Failed to get profile"}}}async getMyProfile(){try{return await C.u.get(O.Sn.AUTH.PROFILE)}catch(e){return{success:!1,error:e instanceof Error?e.message:"Failed to get my profile"}}}async updateProfile(e){try{return await C.u.patch(O.Sn.AUTH.PROFILE,e)}catch(e){return{success:!1,error:e instanceof Error?e.message:"Failed to update profile"}}}async getProfileOptions(){try{return await C.u.get(O.Sn.PROFILE.OPTIONS)}catch(e){return{success:!1,error:e instanceof Error?e.message:"Failed to get profile options"}}}async getUserBasicInfo(e){try{let s=await this.getProfile(e);if(s.success&&s.data){var t,r;let e=s.data,a={id:e.userId,name:e.displayName||"".concat(e.firstName||""," ").concat(e.lastName||"").trim(),avatar:null===(r=e.photos)||void 0===r?void 0:null===(t=r.find(e=>"AVATAR"===e.type))||void 0===t?void 0:t.url,age:e.birthDate?this.calculateAge(e.birthDate):void 0,location:e.location,isVerified:e.isVerified};return{success:!0,data:a}}return{success:!1,error:s.error||"Failed to get user info"}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Failed to get user info"}}}calculateAge(e){let t=new Date,r=new Date(e),s=t.getFullYear()-r.getFullYear(),a=t.getMonth()-r.getMonth();return(a<0||0===a&&t.getDate()<r.getDate())&&s--,s}}let P=new D;var U=r(84917);let L=(0,a.createContext)({search:"",setSearch:e=>{}});function M(){var e,t,r;let{theme:n,setTheme:i,mounted:c}=function(){let{theme:e,setTheme:t}=(0,E.D)(),[r,s]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{s(!0)},[]),{theme:r?e:"light",setTheme:t,mounted:r}}(),{t:d}=(0,T.o)(),[u,h]=(0,a.useState)(null),[m,f]=(0,a.useState)(!0),[x,g]=(0,a.useState)(""),p=(0,l.useRouter)();(0,a.useEffect)(()=>{!async function(){f(!0);try{let e=await P.getMyProfile();e.success&&e.data?h(e.data):h(null)}catch(e){h(null)}finally{f(!1)}}()},[]);let b=async()=>{await U.y.logout(),p.push("/login")};return m?(0,s.jsx)("div",{className:"fixed top-0 right-0 z-30 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 transition-all duration-300 ease-in-out w-full lg:w-auto lg:left-64",children:(0,s.jsx)("div",{className:"flex h-16 items-center px-6 justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})})}):u?(0,s.jsx)(L.Provider,{value:{search:x,setSearch:g},children:(0,s.jsx)("header",{className:"fixed top-0 right-0 z-30 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 transition-all duration-300 ease-in-out w-full lg:w-auto lg:left-64",children:(0,s.jsxs)("div",{className:"flex h-16 items-center px-6 justify-between",children:[(0,s.jsx)("div",{className:"flex items-center space-x-4 md:hidden",children:(0,s.jsx)(R.b,{size:"small"})}),(0,s.jsx)("div",{className:"flex-1 max-w-lg mx-4 hidden md:block",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(N.A,{className:"absolute left-3 top-2.5 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(I.p,{placeholder:d.header.searchPlaceholder,className:"pl-10 bg-muted/50 border-0 focus:bg-background",value:x,onChange:e=>g(e.target.value)})]})}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)(o.$,{variant:"ghost",size:"icon",className:"md:hidden",children:(0,s.jsx)(N.A,{className:"h-5 w-5"})}),(0,s.jsx)(_.c,{}),(0,s.jsxs)(j.rI,{children:[(0,s.jsx)(j.ty,{asChild:!0,children:(0,s.jsx)(o.$,{variant:"ghost",size:"icon",children:c?"dark"===n?(0,s.jsx)(y.A,{className:"h-5 w-5"}):"light"===n?(0,s.jsx)(k.A,{className:"h-5 w-5"}):(0,s.jsx)("div",{className:"h-5 w-5 rounded-full bg-gradient-to-r from-black to-white"}):(0,s.jsx)("div",{className:"h-5 w-5"})})}),(0,s.jsxs)(j.SQ,{align:"end",children:[(0,s.jsxs)(j._2,{onClick:()=>i("light"),children:[(0,s.jsx)(k.A,{className:"mr-2 h-4 w-4"}),(0,s.jsx)("span",{children:d.header.light})]}),(0,s.jsxs)(j._2,{onClick:()=>i("dark"),children:[(0,s.jsx)(y.A,{className:"mr-2 h-4 w-4"}),(0,s.jsx)("span",{children:d.header.dark})]}),(0,s.jsxs)(j._2,{onClick:()=>i("system"),children:[(0,s.jsx)("div",{className:"mr-2 h-4 w-4 rounded-full bg-gradient-to-r from-black to-white"}),(0,s.jsx)("span",{children:d.header.system})]})]})]}),(0,s.jsxs)(j.rI,{children:[(0,s.jsx)(j.ty,{asChild:!0,children:(0,s.jsx)(o.$,{variant:"ghost",className:"relative h-10 w-10 rounded-full",children:(0,s.jsxs)(w.eu,{className:"h-10 w-10",children:[(0,s.jsx)(w.BK,{src:(null==u?void 0:null===(t=u.photos)||void 0===t?void 0:null===(e=t.find(e=>"AVATAR"===e.type))||void 0===e?void 0:e.url)||"/placeholder-user.jpg",alt:(null==u?void 0:u.firstName)||"User"}),(0,s.jsx)(w.q5,{children:(null==u?void 0:null===(r=u.firstName)||void 0===r?void 0:r[0])||"U"})]})})}),(0,s.jsxs)(j.SQ,{align:"end",className:"w-56",children:[(0,s.jsx)("div",{className:"flex items-center justify-start gap-2 p-2",children:(0,s.jsxs)("div",{className:"flex flex-col space-y-1 leading-none",children:[(0,s.jsx)("p",{className:"font-heading font-semibold",children:(null==u?void 0:u.displayName)||"".concat((null==u?void 0:u.firstName)||""," ").concat((null==u?void 0:u.lastName)||"")}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground font-primary",children:null==u?void 0:u.email})]})}),(0,s.jsx)(j.mB,{}),(0,s.jsxs)(j._2,{onClick:()=>p.push("/dashboard/profile"),children:[(0,s.jsx)(S.A,{className:"mr-2 h-4 w-4"}),(0,s.jsx)("span",{children:d.header.profile})]}),(0,s.jsxs)(j._2,{onClick:()=>p.push("/dashboard/settings"),children:[(0,s.jsx)(A.A,{className:"mr-2 h-4 w-4"}),(0,s.jsx)("span",{children:d.header.settings})]}),(0,s.jsx)(j.mB,{}),(0,s.jsxs)(j._2,{onClick:b,className:"text-red-600",children:[(0,s.jsx)(v.A,{className:"mr-2 h-4 w-4"}),(0,s.jsx)("span",{children:d.header.logout})]})]})]})]})]})})}):(0,s.jsx)("div",{className:"fixed top-0 right-0 z-30 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 transition-all duration-300 ease-in-out w-full lg:w-auto lg:left-64",children:(0,s.jsx)("div",{className:"flex h-16 items-center px-6 justify-center",children:(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Authentication required"})})})}function z(){let[e,t]=(0,a.useState)(!1),[r,i]=(0,a.useState)(!1),d=function(){let[e,t]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e=()=>{t(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),e}(),w=(0,l.usePathname)(),j=(0,l.useRouter)(),{t:N}=(0,T.o)();(0,a.useEffect)(()=>{let e=localStorage.getItem("sidebarCollapsed");null!==e&&i("true"===e)},[]),(0,a.useEffect)(()=>{localStorage.setItem("sidebarCollapsed",r.toString()),document.body.setAttribute("data-sidebar-collapsed",r.toString())},[r]);let y=async()=>{await U.y.logout(),j.push("/login")},k=U.y.getCurrentUser(),S=(null==k?void 0:k.roleName)==="ADMIN",A=(null==k?void 0:k.roleName)==="MODERATOR",{search:E}=(0,a.useContext)(L),I=[{href:"/dashboard",title:N.dashboard,icon:(0,s.jsx)(u.A,{className:"h-5 w-5"}),visible:S},{href:"/add-account",title:N.addAccount,icon:(0,s.jsx)(h.A,{className:"h-5 w-5"}),visible:S},{href:"/dashboard/users",title:N.users,icon:(0,s.jsx)(h.A,{className:"h-5 w-5"}),visible:S||A},{href:"/dashboard/moderators",title:N.moderators,icon:(0,s.jsx)(m.A,{className:"h-5 w-5"}),visible:S},{href:"/dashboard/reports",title:N.reports,icon:(0,s.jsx)(f.A,{className:"h-5 w-5"}),visible:S||A},{href:"/dashboard/matches",title:N.matches,icon:(0,s.jsx)(x.A,{className:"h-5 w-5"}),visible:S},{href:"/dashboard/subscriptions",title:N.subscriptions,icon:(0,s.jsx)(g.A,{className:"h-5 w-5"}),visible:S}];return(0,s.jsxs)(s.Fragment,{children:[d&&(0,s.jsx)(o.$,{variant:"ghost",size:"icon",className:"fixed top-4 left-4 z-50",onClick:()=>{t(!e)},children:e?(0,s.jsx)(p.A,{className:"h-5 w-5"}):(0,s.jsx)(b.A,{className:"h-5 w-5"})}),(0,s.jsxs)("aside",{className:(0,n.cn)("bg-background border-r border-border flex-col z-40 transition-all duration-300 ease-in-out fixed h-screen shadow-2xl",d?"inset-y-0 left-0 transform ".concat(e?"translate-x-0":"-translate-x-full"):r?"w-16":"w-64"),"data-collapsed":r,children:[(0,s.jsx)("div",{className:"p-4 flex items-center justify-center border-b border-border bg-background",children:r?(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(x.A,{className:"h-8 w-8 text-rose-500 fill-rose-500"}),(0,s.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-gradient-to-r from-pink-400 to-rose-400 rounded-full"})]}):(0,s.jsx)("div",{className:"flex items-center space-x-2",children:(0,s.jsx)(R.b,{size:"small"})})}),(0,s.jsxs)("div",{className:"flex-grow flex flex-col h-[calc(100vh-80px)] relative",children:[(0,s.jsx)(c,{className:"flex-1",children:(0,s.jsx)("nav",{className:"grid gap-1 px-3 py-4",children:I.filter(e=>e.visible).map(e=>{let t=w===e.href,a=E&&e.title.toLowerCase().includes(E.toLowerCase());return(0,s.jsxs)("button",{onClick:()=>j.push(e.href),className:(0,n.cn)("sidebar-item group flex items-center gap-3 rounded-xl px-3 py-3 text-sm font-medium font-primary transition-all duration-200 relative overflow-hidden w-full text-left","hover:bg-primary/10 dark:hover:bg-primary/20 hover:text-primary dark:hover:text-primary",t?"bg-primary/20 text-primary shadow-lg shadow-primary/20":a?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300 border border-yellow-300 dark:border-yellow-700":"text-slate-700 dark:text-slate-300",r?"justify-center px-2":""),children:[t&&(0,s.jsx)("div",{className:"absolute left-0 top-0 w-1 h-full bg-primary rounded-r-full shadow-lg shadow-primary/50"}),(0,s.jsx)("div",{className:(0,n.cn)("flex items-center justify-center transition-transform group-hover:scale-110",t?"text-primary":a?"text-yellow-700 dark:text-yellow-300":"group-hover:text-primary"),children:e.icon}),!r&&(0,s.jsx)("span",{className:(0,n.cn)("sidebar-text transition-all duration-200 group-hover:translate-x-1 group-hover:text-primary",a?"font-bold":""),children:e.title}),t&&!r&&(0,s.jsx)("div",{className:"ml-auto w-2 h-2 bg-primary rounded-full animate-pulse"})]},e.href)})})}),(0,s.jsx)("div",{className:"px-3 pb-2",children:(0,s.jsxs)("button",{onClick:y,className:(0,n.cn)("sidebar-item group flex items-center gap-3 rounded-xl px-3 py-3 text-sm font-medium font-primary transition-all duration-200 relative overflow-hidden w-full text-left","hover:bg-red-50 dark:hover:bg-red-900/20 hover:text-red-600 dark:hover:text-red-400","text-slate-600 dark:text-slate-400",r?"justify-center px-2":""),children:[(0,s.jsx)("div",{className:(0,n.cn)("flex items-center justify-center transition-transform group-hover:scale-110","group-hover:text-red-600 dark:group-hover:text-red-400"),children:(0,s.jsx)(v.A,{className:"h-5 w-5"})}),!r&&(0,s.jsx)("span",{className:"sidebar-text transition-all duration-200 group-hover:translate-x-1",children:N.header.logout})]})}),(0,s.jsx)("div",{className:"p-4 flex justify-center border-t border-border",children:(0,s.jsx)(o.$,{variant:"ghost",size:"icon",onClick:()=>{i(!r)},className:"bg-primary/20 hover:bg-primary/30 text-primary rounded-xl h-12 w-12 flex items-center justify-center shadow-lg transition-all duration-300 hover:scale-105 border border-primary/30",title:r?"Expand sidebar":"Collapse sidebar",children:(0,s.jsx)(b.A,{className:"h-5 w-5"})})})]})]}),d&&e&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 z-30",onClick:()=>t(!1)})]})}function F(e){let{children:t,fallback:r=null}=e,[l,n]=(0,a.useState)(!1),[o,i]=(0,a.useState)(null);return((0,a.useEffect)(()=>{try{n(!0)}catch(e){i(e instanceof Error?e:Error("Unknown error"))}},[]),o)?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-red-600 mb-2",children:"Something went wrong"}),(0,s.jsx)("p",{className:"text-gray-600",children:o.message}),(0,s.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Reload Page"})]})}):l?(0,s.jsx)(s.Fragment,{children:t}):(0,s.jsx)(s.Fragment,{children:r})}var H=r(94821);function V(e){let{children:t}=e;(0,l.useRouter)();let{handleLogout:r}=function(){let e=(0,l.useRouter)(),t=(0,a.useRef)(null),r=(0,a.useRef)(!1),s=async()=>{if(!r.current){if(!localStorage.getItem("auth_token")){await n();return}r.current=!0;try{let r=await C.u.get("/profile/me");if(!r.success){var e,t,s,a;((null===(e=r.error)||void 0===e?void 0:e.includes("Authentication required"))||(null===(t=r.error)||void 0===t?void 0:t.includes("Invalid"))||(null===(s=r.error)||void 0===s?void 0:s.includes("401"))||(null===(a=r.error)||void 0===a?void 0:a.includes("Unauthorized")))&&await n()}}catch(t){let e=t instanceof Error?t.message:String(t);(e.includes("401")||e.includes("Unauthorized")||e.includes("Authentication"))&&await n()}finally{r.current=!1}}},n=async()=>{try{await U.y.logout(),e.push("/login")}catch(t){U.y.clearAllAuthData(),e.push("/login")}};return(0,a.useEffect)(()=>{let e="true"===localStorage.getItem("isLoggedIn"),r=localStorage.getItem("auth_token");if(!e||!r)return;s(),t.current=setInterval(s,3e5);let a=e=>{"auth_token"===e.key&&null===e.newValue&&n()};return window.addEventListener("storage",a),()=>{t.current&&(clearInterval(t.current),t.current=null),window.removeEventListener("storage",a)}},[]),(0,a.useEffect)(()=>()=>{t.current&&(clearInterval(t.current),t.current=null)},[]),{checkTokenValidity:s,handleLogout:n}}();return(0,a.useEffect)(()=>{let e=()=>{r()};return window.addEventListener("token-expired",e),()=>{window.removeEventListener("token-expired",e)}},[r]),(0,s.jsx)(s.Fragment,{children:t})}function q(){let e=(0,l.useRouter)();return(0,a.useEffect)(()=>{let t=window.fetch;return window.fetch=async function(){for(var r=arguments.length,s=Array(r),a=0;a<r;a++)s[a]=arguments[a];let l=await t(...s);if(401===l.status){let t="";"string"==typeof s[0]?t=s[0]:s[0]instanceof Request?t=s[0].url:s[0]instanceof URL&&(t=s[0].toString()),t.includes("/auth/login")||t.includes("/login")||(U.y.clearAllAuthData(),e.push("/login"))}return l},()=>{window.fetch=t}},[e]),null}function W(e){let{children:t}=e,r=(0,l.useRouter)();return(0,a.useEffect)(()=>{let e;let t=localStorage.getItem("auth_token"),s=localStorage.getItem("user_data");if(s)try{e=JSON.parse(s).roleName}catch(e){}t&&["ADMIN","MODERATOR"].includes(e)||(U.y.logout(),r.push("/login"))},[r]),(0,a.useEffect)(()=>{let e=localStorage.getItem("primaryColor"),t=localStorage.getItem("fontSize"),r="true"===localStorage.getItem("sidebarCollapsed");if(document.body.setAttribute("data-sidebar-collapsed",String(!!r)),e&&/^#[0-9A-Fa-f]{6}$/.test(e)){let t=Number.parseInt(e.slice(1,3),16)/255,r=Number.parseInt(e.slice(3,5),16)/255,s=Number.parseInt(e.slice(5,7),16)/255,a=Math.max(t,r,s),l=Math.min(t,r,s),n=0,o=0,i=(a+l)/2;if(a!==l){let e=a-l;switch(o=i>.5?e/(2-a-l):e/(a+l),a){case t:n=(r-s)/e+6*(r<s);break;case r:n=(s-t)/e+2;break;case s:n=(t-r)/e+4}n/=6}n=Math.round((null!=n?n:0)*360),o=Math.round((null!=o?o:0)*100),i=Math.round((null!=i?i:0)*100),document.documentElement.style.setProperty("--primary","".concat(n," ").concat(o,"% ").concat(i,"%"))}t&&!isNaN(Number(t))&&(document.documentElement.style.fontSize="".concat(t,"px"))},[]),(0,s.jsx)(H.default,{children:(0,s.jsxs)(V,{children:[(0,s.jsx)(q,{}),(0,s.jsx)(F,{fallback:(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}),children:(0,s.jsxs)("div",{className:"flex min-h-screen flex-col bg-gradient-soft relative overflow-hidden",suppressHydrationWarning:!0,children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-96 h-96 bg-gradient-to-br from-pink-100/30 to-purple-100/30 rounded-full blur-3xl pointer-events-none"}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 w-80 h-80 bg-gradient-to-tr from-rose-100/30 to-pink-100/30 rounded-full blur-3xl pointer-events-none"}),(0,s.jsxs)("div",{className:"flex flex-1 relative z-10",suppressHydrationWarning:!0,children:[(0,s.jsx)(z,{}),(0,s.jsxs)("div",{className:"flex-1 main-content flex flex-col transition-all duration-300 ease-in-out",children:[(0,s.jsx)(M,{}),(0,s.jsx)("main",{className:"flex-1 p-6 pt-20 overflow-y-auto",children:t})]})]})]})})]})})}},84917:(e,t,r)=>{"use strict";r.d(t,{y:()=>n});var s=r(65988),a=r(39910);class l{async registerInitiate(e){try{return await s.u.post(a.Sn.AUTH.REGISTER_INITIATE,e)}catch(e){return{success:!1,error:e instanceof Error?e.message:"Failed to register"}}}async login(e){try{let t=await s.u.post(a.Sn.AUTH.LOGIN,e);if(t.success&&t.data){if(s.u.setToken(t.data.accessToken),localStorage.setItem("auth_token",t.data.accessToken),localStorage.setItem("refresh_token",t.data.refreshToken),localStorage.setItem("user_data",JSON.stringify(t.data.user)),document.cookie="auth_token=".concat(t.data.accessToken,"; path=/; max-age=86400"),"ADMIN"===t.data.user.roleName||"MODERATOR"===t.data.user.roleName)return localStorage.setItem("isLoggedIn","true"),t;return await this.logout(),{success:!1,error:"Bạn kh\xf4ng c\xf3 quyền truy cập trang quản trị. Chỉ ADMIN hoặc MODERATOR mới được ph\xe9p đăng nhập."}}return this.clearAllAuthData(),t}catch(e){return this.clearAllAuthData(),{success:!1,error:e instanceof Error?e.message:"Login failed"}}}clearAllAuthData(){s.u.clearToken(),localStorage.removeItem("auth_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user_data"),localStorage.removeItem("isLoggedIn"),document.cookie="auth_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 UTC;"}async refreshToken(){let e=localStorage.getItem("refresh_token");if(!e)return{success:!1,error:"No refresh token available"};try{let t=await s.u.post(a.Sn.AUTH.REFRESH,e);return t.success&&t.data&&(s.u.setToken(t.data.accessToken),localStorage.setItem("refresh_token",t.data.refreshToken),localStorage.setItem("user_data",JSON.stringify(t.data.user))),t}catch(e){return this.logout(),{success:!1,error:e instanceof Error?e.message:"Token refresh failed"}}}async logout(){let e=localStorage.getItem("refresh_token");if(e)try{await s.u.post(a.Sn.AUTH.LOGOUT,e)}catch(e){}this.clearAllAuthData(),window.dispatchEvent(new StorageEvent("storage",{key:"auth_token",newValue:null,oldValue:localStorage.getItem("auth_token")}))}async changePassword(e){return s.u.post(a.Sn.AUTH.CHANGE_PASSWORD,e)}async requestPasswordReset(e){return s.u.post(a.Sn.AUTH.PASSWORD_RESET_REQUEST,e)}async verifyPasswordResetOtp(e){return s.u.post(a.Sn.AUTH.PASSWORD_RESET_VERIFY_OTP,e)}async resetPassword(e){return s.u.post(a.Sn.AUTH.PASSWORD_RESET,e)}async resendPasswordResetOtp(e){return s.u.post(a.Sn.AUTH.PASSWORD_RESET_RESEND_OTP,{sessionToken:e})}getCurrentUser(){let e=localStorage.getItem("user_data");return e?JSON.parse(e):null}isAuthenticated(){let e=localStorage.getItem("auth_token"),t=localStorage.getItem("user_data");return!!(e&&t)}isAdminOrModerator(){let e=this.getCurrentUser();return!!(e&&("ADMIN"===e.roleName||"MODERATOR"===e.roleName))}}let n=new l},89852:(e,t,r)=>{"use strict";r.d(t,{p:()=>n});var s=r(95155),a=r(12115),l=r(53999);let n=a.forwardRef((e,t)=>{let{className:r,type:a,...n}=e;return(0,s.jsx)("input",{type:a,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...n})});n.displayName="Input"},94821:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});var s=r(95155),a=r(12115);class l extends a.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){}render(){if(this.state.hasError){var e;if(this.props.fallback){let e=this.props.fallback;return(0,s.jsx)(e,{error:this.state.error,resetError:this.resetError})}return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center max-w-md mx-auto p-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Something went wrong"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:(null===(e=this.state.error)||void 0===e?void 0:e.message)||"An unexpected error occurred"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("button",{onClick:this.resetError,className:"w-full px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"Try Again"}),(0,s.jsx)("button",{onClick:()=>window.location.reload(),className:"w-full px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors",children:"Reload Page"})]})]})})}return this.props.children}constructor(e){super(e),this.resetError=()=>{this.setState({hasError:!1,error:void 0})},this.state={hasError:!1}}}let n=l}}]);